<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Sergi Rodriguez Utge (SerotDev)" />
    <meta name="description" content="Project Valentines Day Quest v1.0 - Developed by SerotDev (https://github.com/SerotDev)">
    <meta name="keywords" content="HTML, CSS, JavaScript, Bootstrap">
    <meta name="copyright" content="2024 SerotDev" />
    <meta name="robots" content="noindex,nofollow" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../css/scratch.css">
    <script defer src="../js/scratch.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"
        integrity="sha256-c9vxcXyAG4paArQG3xk6DjyW/9aHxai2ef9RpMWO44A=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
    <script defer src="../js/div-to-pdf.js"></script>
    <title>Valentine's Day Quest</title>
    <link rel="icon" href="../favicon.ico">
</head>

<body>
    <div class="body-container-centred background-img">
        <div class="pb-1">
            <h1 class="scratch-title">Rasca el recuadro para conocer tu premio:</h1>
        </div>
        <div id="to-img-pdf">
            <div class="scratch-container" id="js-scratch-container">
                <canvas class="scratch-canvas" id="js-scratch-canvas"></canvas>
                <form class="scratch-content" onsubmit="return false;" style="visibility: hidden;">
                    <div class="h-100 container text-center">
                        <h2>FELICIDADES, HAS GANADO!</h2>
                        <h4>Introduce tu código del amor:</h4>
                        <div class="pt-1">
                            <input id="code-to-redeem" class="btn-inside" type="text" name="code"
                                placeholder="Código Secreto">
                        </div>
                        <div class="pt-3">
                            <button class="btn btn-warning btn-inside" onclick="redeemCode()">Comprobar</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="mt-4">
            <button class="btn btn-warning btn-300px" id="downloadPDF">Descargar tíquet en PDF</button>
        </div>
        <!-- Invalid code Modal -->
        <div class="modal fade" id="invalidCode" tabindex="-1" aria-labelledby="invalidCodeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="invalidCodeModalLabel">Código Inválido</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body alert-danger">
                        <p>El código introducido no es el código secreto del amor.</p>
                        <p>Lo siento pero creo que tendrás que seguir buscando, puede que tengas más suerte si buscas por la playa &#128520;</p>
                        <a class="btn btn-outline-danger" href="https://www.google.com/maps/search/?api=1&amp;query=41.114354%2C1.261914"><i class="fa-solid fa-location-dot"></i> Ir a la Ubicación</a>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Succes Modal -->
        <div class="modal fade" id="validCode" tabindex="-1" aria-labelledby="invalidCodeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="invalidCodeModalLabel">Código Corecto</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body alert-success">
                        <h3>Felicidades, Código correcto!!!</h3>
                        <p>El código del amor has encontrado y de momento mis pruebas superado, ahora si tu recompensa quieres obtener, ármarte de valor y dirígirte a mi lugar de reposo.</p>
                        <a class="btn btn-outline-success" href="https://www.google.com/maps/search/?api=1&amp;query=41.1148834%2C1.2566454"><i class="fa-solid fa-location-dot"></i> Ir a la Ubicación</a>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript">
    // Function to redeem the code and show popup depending if its the valid code or not
    function redeemCode() {
        let code = document.getElementById("code-to-redeem").value
        if (code.toUpperCase() === "1024") {
            $('#validCode').modal('show');
        } else{
            $('#invalidCode').modal('show');
        }
        console.log("code: " + code);
    }
</script>

</html>